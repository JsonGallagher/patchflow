{
  "nodes": [
    {
      "id": "node_1",
      "typeId": "AudioInput",
      "x": 100,
      "y": 300,
      "params": {}
    },
    {
      "id": "node_2",
      "typeId": "FFTAnalyzer",
      "x": 320,
      "y": 200,
      "params": {
        "fftOrder": 11,
        "windowType": 0
      }
    },
    {
      "id": "node_3",
      "typeId": "EnvelopeFollower",
      "x": 320,
      "y": 400,
      "params": {
        "attackMs": 10.0,
        "releaseMs": 100.0
      }
    },
    {
      "id": "node_4",
      "typeId": "Smoothing",
      "x": 520,
      "y": 400,
      "params": {
        "smoothing": 0.9
      }
    },
    {
      "id": "node_5",
      "typeId": "BandSplitter",
      "x": 520,
      "y": 200,
      "params": {
        "crossover1": 60.0,
        "crossover2": 250.0,
        "crossover3": 2000.0,
        "crossover4": 6000.0
      }
    },
    {
      "id": "node_6",
      "typeId": "Smoothing",
      "x": 720,
      "y": 150,
      "params": {
        "smoothing": 0.92
      }
    },
    {
      "id": "node_7",
      "typeId": "Smoothing",
      "x": 720,
      "y": 300,
      "params": {
        "smoothing": 0.85
      }
    },
    {
      "id": "node_8",
      "typeId": "ShaderVisual",
      "x": 940,
      "y": 250,
      "params": {
        "fragmentShader": "uniform float u_time;\nuniform vec2 u_resolution;\nuniform float u_param1;\nuniform float u_param2;\nuniform float u_param3;\nuniform float u_param4;\nuniform sampler2D u_spectrum;\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / u_resolution;\n    vec2 p = uv * 2.0 - 1.0;\n    p.x *= u_resolution.x / u_resolution.y;\n\n    float env = u_param1;\n    float bass = u_param2;\n    float high = u_param3;\n\n    float wave1 = sin(p.x * 3.0 + u_time * 1.5 + bass * 6.28) * 0.3 * (1.0 + env);\n    float wave2 = sin(p.x * 5.0 - u_time * 2.0 + high * 3.14) * 0.15;\n    float wave3 = cos(p.x * 7.0 + u_time * 0.8) * 0.1 * bass;\n\n    float y = wave1 + wave2 + wave3;\n    float d = abs(p.y - y);\n\n    float glow = 0.005 / (d * d + 0.005);\n    glow *= 0.5 + env * 0.5;\n\n    vec3 col = vec3(0.1 + high, 0.5 + bass * 0.5, 1.0) * glow * 0.2;\n    col += vec3(1.0, 0.3, 0.7) * (0.003 / (abs(d - 0.02) + 0.003)) * 0.1;\n\n    float spec = texture2D(u_spectrum, vec2(uv.x, 0.0)).r;\n    col += vec3(spec * 0.3 * high, spec * 0.1, spec * 0.4) * (1.0 - uv.y) * 0.5;\n\n    gl_FragColor = vec4(col, 1.0);\n}\n"
      }
    },
    {
      "id": "node_9",
      "typeId": "OutputCanvas",
      "x": 1160,
      "y": 250,
      "params": {
        "bgR": 0.0,
        "bgG": 0.0,
        "bgB": 0.0
      }
    }
  ],
  "connections": [
    {
      "sourceNode": "node_1",
      "sourcePort": 0,
      "destNode": "node_2",
      "destPort": 0
    },
    {
      "sourceNode": "node_1",
      "sourcePort": 0,
      "destNode": "node_3",
      "destPort": 0
    },
    {
      "sourceNode": "node_2",
      "sourcePort": 0,
      "destNode": "node_5",
      "destPort": 0
    },
    {
      "sourceNode": "node_3",
      "sourcePort": 0,
      "destNode": "node_4",
      "destPort": 0
    },
    {
      "sourceNode": "node_5",
      "sourcePort": 0,
      "destNode": "node_6",
      "destPort": 0
    },
    {
      "sourceNode": "node_5",
      "sourcePort": 3,
      "destNode": "node_7",
      "destPort": 0
    },
    {
      "sourceNode": "node_4",
      "sourcePort": 0,
      "destNode": "node_8",
      "destPort": 0
    },
    {
      "sourceNode": "node_6",
      "sourcePort": 0,
      "destNode": "node_8",
      "destPort": 1
    },
    {
      "sourceNode": "node_7",
      "sourcePort": 0,
      "destNode": "node_8",
      "destPort": 2
    },
    {
      "sourceNode": "node_8",
      "sourcePort": 0,
      "destNode": "node_9",
      "destPort": 0
    },
    {
      "sourceNode": "node_2",
      "sourcePort": 0,
      "destNode": "node_8",
      "destPort": 4
    },
    {
      "sourceNode": "node_1",
      "sourcePort": 1,
      "destNode": "node_2",
      "destPort": 1
    },
    {
      "sourceNode": "node_1",
      "sourcePort": 1,
      "destNode": "node_3",
      "destPort": 1
    }
  ]
}
