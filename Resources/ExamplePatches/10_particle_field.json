{
  "nodes": [
    {
      "id": "node_1",
      "typeId": "AudioInput",
      "x": 100,
      "y": 300,
      "params": {}
    },
    {
      "id": "node_2",
      "typeId": "FFTAnalyzer",
      "x": 320,
      "y": 250,
      "params": {
        "fftOrder": 11,
        "windowType": 0
      }
    },
    {
      "id": "node_3",
      "typeId": "BandSplitter",
      "x": 520,
      "y": 250,
      "params": {
        "crossover1": 60.0,
        "crossover2": 250.0,
        "crossover3": 2000.0,
        "crossover4": 6000.0
      }
    },
    {
      "id": "node_4",
      "typeId": "Smoothing",
      "x": 720,
      "y": 100,
      "params": {
        "smoothing": 0.86
      }
    },
    {
      "id": "node_5",
      "typeId": "Smoothing",
      "x": 720,
      "y": 220,
      "params": {
        "smoothing": 0.84
      }
    },
    {
      "id": "node_6",
      "typeId": "Smoothing",
      "x": 720,
      "y": 340,
      "params": {
        "smoothing": 0.82
      }
    },
    {
      "id": "node_7",
      "typeId": "Smoothing",
      "x": 720,
      "y": 460,
      "params": {
        "smoothing": 0.8
      }
    },
    {
      "id": "node_8",
      "typeId": "ShaderVisual",
      "x": 960,
      "y": 280,
      "params": {
        "fragmentShader": "uniform float u_time;\nuniform vec2 u_resolution;\nuniform float u_param1;\nuniform float u_param2;\nuniform float u_param3;\nuniform float u_param4;\nuniform sampler2D u_spectrum;\n\nfloat hash(vec2 p) {\n    return fract(sin(dot(p, vec2(127.1, 311.7))) * 43758.5453);\n}\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / u_resolution;\n    vec2 p = uv * 2.0 - 1.0;\n    p.x *= u_resolution.x / u_resolution.y;\n\n    float sub = clamp(u_param1 * 12.0, 0.0, 2.0);\n    float low = clamp(u_param2 * 14.0, 0.0, 2.0);\n    float mid = clamp(u_param3 * 16.0, 0.0, 2.0);\n    float pres = clamp(u_param4 * 18.0, 0.0, 2.0);\n\n    vec3 col = vec3(0.01, 0.015, 0.03) * (1.0 - length(p) * 0.35);\n\n    for (int layer = 0; layer < 4; layer++) {\n        float fl = float(layer);\n        float depth = 1.0 + fl * 0.45;\n        float speed = (0.35 + fl * 0.28) * (1.0 + sub * 0.5 + mid * 0.4);\n\n        vec2 grid = p * (16.0 + fl * 9.0);\n        grid.y += u_time * speed;\n        grid.x += sin(u_time * (0.4 + fl * 0.1) + fl) * low * 0.8;\n\n        vec2 cell = floor(grid);\n        vec2 local = fract(grid) - 0.5;\n\n        float rnd = hash(cell + fl * 100.0);\n        vec2 offset = vec2(\n            hash(cell + vec2(1.0, 0.0) + fl * 100.0) - 0.5,\n            hash(cell + vec2(0.0, 1.0) + fl * 100.0) - 0.5\n        ) * 0.42;\n\n        float d = length(local - offset);\n        float size = (0.03 + rnd * 0.05) * (1.0 + mid * 0.9 + pres * 0.6);\n\n        float star = size / (d * d + size);\n        star *= step(0.22, rnd);\n\n        vec3 layerCol;\n        if (layer == 0) layerCol = vec3(0.50, 0.72, 1.00);\n        else if (layer == 1) layerCol = vec3(1.00, 0.55, 0.75);\n        else if (layer == 2) layerCol = vec3(0.72, 1.00, 0.55);\n        else layerCol = vec3(1.00, 0.90, 0.55);\n\n        float bandReact;\n        if (layer == 0) bandReact = sub;\n        else if (layer == 1) bandReact = low;\n        else if (layer == 2) bandReact = mid;\n        else bandReact = pres;\n\n        star *= 0.8 + bandReact * 2.3;\n        col += layerCol * star * 0.15 / depth;\n    }\n\n    float spec = texture2D(u_spectrum, vec2(uv.x, 0.0)).r;\n    float specBoost = clamp(spec * 14.0, 0.0, 1.5);\n    col += vec3(0.25, 0.14, 0.35) * specBoost * (1.0 - uv.y);\n    col += vec3(0.04, 0.05, 0.08) * (sub + low) * 0.2;\n\n    gl_FragColor = vec4(col, 1.0);\n}\n"
      }
    },
    {
      "id": "node_9",
      "typeId": "OutputCanvas",
      "x": 1200,
      "y": 280,
      "params": {
        "bgR": 0.0,
        "bgG": 0.0,
        "bgB": 0.0
      }
    }
  ],
  "connections": [
    {
      "sourceNode": "node_1",
      "sourcePort": 0,
      "destNode": "node_2",
      "destPort": 0
    },
    {
      "sourceNode": "node_2",
      "sourcePort": 0,
      "destNode": "node_3",
      "destPort": 0
    },
    {
      "sourceNode": "node_3",
      "sourcePort": 0,
      "destNode": "node_4",
      "destPort": 0
    },
    {
      "sourceNode": "node_3",
      "sourcePort": 1,
      "destNode": "node_5",
      "destPort": 0
    },
    {
      "sourceNode": "node_3",
      "sourcePort": 2,
      "destNode": "node_6",
      "destPort": 0
    },
    {
      "sourceNode": "node_3",
      "sourcePort": 3,
      "destNode": "node_7",
      "destPort": 0
    },
    {
      "sourceNode": "node_4",
      "sourcePort": 0,
      "destNode": "node_8",
      "destPort": 0
    },
    {
      "sourceNode": "node_5",
      "sourcePort": 0,
      "destNode": "node_8",
      "destPort": 1
    },
    {
      "sourceNode": "node_6",
      "sourcePort": 0,
      "destNode": "node_8",
      "destPort": 2
    },
    {
      "sourceNode": "node_7",
      "sourcePort": 0,
      "destNode": "node_8",
      "destPort": 3
    },
    {
      "sourceNode": "node_8",
      "sourcePort": 0,
      "destNode": "node_9",
      "destPort": 0
    },
    {
      "sourceNode": "node_2",
      "sourcePort": 0,
      "destNode": "node_8",
      "destPort": 4
    }
  ]
}
